<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoPower - Electricity Payment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: #ffffff;
            /* Light mode background */
        }

        .header-gradient {
            background: linear-gradient(90deg, #166534 0%, #22c55e 100%);
        }

        .card {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.1);
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, .3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .spinner-lg {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: #16a34a;
            animation: spin 1s linear infinite;
        }

        .bill-item {
            transition: all 0.3s ease;
            border-left: 3px solid #22c55e;
        }

        .overdue-item {
            border-left: 3px solid #ef4444;
        }

        .due-badge {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
            border-radius: 4px;
        }

        .bill-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .bill-table tr:last-child td {
            border-bottom: none;
        }

        .payment-history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .payment-history-table th {
            background-color: #f9fafb;
            text-align: left;
            padding: 12px 16px;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        .payment-history-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            color: #4b5563;
        }

        .payment-history-table tr:last-child td {
            border-bottom: none;
        }

        .payment-history-table tr:hover {
            background-color: #f9fafb;
        }

        .payment-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-paid {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }

        .disabled-button {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-message {
            background-color: #fef2f2;
            color: #b91c1c;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 12px;
            display: flex;
            align-items: flex-start;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .error-message i {
            margin-right: 10px;
            margin-top: 3px;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="header-gradient shadow-lg sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fas fa-bolt text-white text-2xl mr-3"></i>
                <h1 class="text-2xl font-bold text-white">Eco<span class="text-primary-200">Power</span></h1>
            </div>
            <nav class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="#" class="text-white hover:text-primary-200 transition">Dashboard</a></li>
                    <li><a href="#" class="text-white hover:text-primary-200 transition">Usage</a></li>
                    <li><a href="#" class="text-white font-semibold border-b-2 border-white pb-1">Payments</a></li>
                    <li><a href="#" class="text-white hover:text-primary-200 transition">Support</a></li>
                </ul>
            </nav>
            <div class="flex items-center">
                <button
                    class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-full text-sm font-medium transition">
                    <i class="fas fa-user mr-2"></i>My Account
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-800 mb-3">Electricity Bill Payment</h2>
                <p class="text-gray-600 max-w-lg mx-auto">Quick, secure payments for your electricity bills. View your
                    current charges and overdue amounts in one place.</p>
            </div>

            <!-- Account Input Card -->
            <div class="bg-white card p-6 mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div class="flex items-center mb-4 md:mb-0">
                        <div class="bg-primary-100 p-3 rounded-full mr-4">
                            <i class="fas fa-search text-primary-600 text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">Find Your Account</h3>
                    </div>
                    <div class="bg-primary-50 px-4 py-2 rounded-full text-sm text-primary-700">
                        <i class="fas fa-lightbulb mr-2"></i>Enter your 8-digit account number
                    </div>
                </div>

                <div class="mb-6">
                    <label class="block text-gray-700 mb-2 font-medium">Consumer Account Number</label>
                    <div class="relative">
                        <input type="text" id="accountNumber" placeholder="Enter your 8-digit account number"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition text-lg"
                            maxlength="8">
                        <i class="fas fa-hashtag absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div id="accountError" class="hidden bg-red-50 text-red-800 p-3 rounded-lg mb-4 flex items-start">
                        <i class="fas fa-exclamation-circle mt-1 mr-2"></i>
                        <div>
                            <strong class="font-medium">Error:</strong> <span id="errorMessage"></span>
                        </div>
                    </div>
                </div>

                <button id="fetchAccountBtn"
                    class="w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-4 rounded-lg transition flex items-center justify-center">
                    <span>Retrieve Account Details</span>
                    <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>

            <!-- Account Details Card (Initially Hidden) -->
            <div id="accountDetails" class="bg-white card p-6 hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div class="flex items-center mb-4 md:mb-0">
                        <div class="bg-primary-100 p-3 rounded-full mr-4">
                            <i class="fas fa-user-circle text-primary-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800">Account Details</h3>
                            <p class="text-gray-600 text-sm">View your billing information and payment options</p>
                        </div>
                    </div>
                    <div id="dueIndicator"
                        class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-medium">
                        <i class="fas fa-clock mr-2"></i>Due in 7 days
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-gray-50 p-5 rounded-xl">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-gray-600 text-sm">Account Holder</p>
                                <p id="fullName" class="font-semibold text-gray-800 text-lg">-</p>
                            </div>
                            <div class="bg-white p-2 rounded-lg">
                                <i class="fas fa-user text-primary-600"></i>
                            </div>
                        </div>
                        <div class="flex justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Account Number</p>
                                <p id="accountNum" class="font-semibold text-gray-800">-</p>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm">Last Payment</p>
                                <p id="lastPaymentDate" class="font-semibold text-gray-800">-</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-primary-50 p-5 rounded-xl">
                        <div class="flex justify-between items-center mb-3">
                            <p class="text-gray-700 font-medium">Total Amount Due</p>
                            <p id="accountBalance" class="text-2xl font-bold text-gray-800">₱0.00</p>
                        </div>
                        <div class="mb-2">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>Due Date</span>
                                <span id="dueDate">July 25, 2023</span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div id="dueProgress" class="progress-fill" style="width: 70%"></div>
                        </div>
                    </div>
                </div>

                <!-- Bill Breakdown -->
                <div class="mb-8">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-file-invoice mr-3 text-primary-600"></i> Bill Breakdown
                    </h4>

                    <!-- Current Bill -->
                    <div class="mb-6">
                        <h5 class="text-md font-medium text-gray-700 mb-3 flex items-center">
                            <i class="fas fa-bolt text-green-500 mr-2"></i> Current Bill
                            <span class="ml-auto text-sm font-normal bg-green-100 text-green-800 px-2 py-1 rounded">
                                Due in 7 days
                            </span>
                        </h5>
                        <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                            <table class="w-full bill-table">
                                <tr>
                                    <td>July 2023 Electricity Usage</td>
                                    <td class="text-right">₱1,850.75</td>
                                </tr>
                                <tr>
                                    <td>Service Period: Jul 1 - Jul 31</td>
                                    <td class="text-right">-</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="font-semibold">Current Bill Total</td>
                                    <td class="text-right font-semibold">₱1,850.75</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Overdue Bills -->
                    <div class="mb-6">
                        <h5 class="text-md font-medium text-gray-700 mb-3 flex items-center">
                            <i class="fas fa-exclamation-triangle text-red-500 mr-2"></i> Overdue Bills
                            <span
                                class="ml-auto text-sm font-normal bg-red-100 text-red-800 px-2 py-1 rounded due-badge">
                                over 30 days
                            </span>
                        </h5>
                        <div class="bg-white border border-gray-200 rounded-xl overflow-hidden">
                            <table class="w-full bill-table">
                                <tr>
                                    <td colspan="2" class="font-medium">June 2023 Electricity Bill</td>
                                </tr>
                                <tr>
                                    <td class="pl-6">Base Amount</td>
                                    <td class="text-right">₱850.25</td>
                                </tr>
                                <tr>
                                    <td class="pl-6">Interest (3.5% for 45 days)</td>
                                    <td class="text-right">₱29.76</td>
                                </tr>
                                <tr>
                                    <td class="pl-6">Service Fee</td>
                                    <td class="text-right">₱50.00</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="font-semibold pl-6">Overdue Bill Total</td>
                                    <td class="text-right font-semibold">₱929.01</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Total Amount -->
                    <div class="bg-primary-50 border border-primary-200 rounded-xl p-5">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-700 font-medium">Total Amount Due</p>
                                <p class="text-sm text-gray-600">Includes all current and overdue charges</p>
                            </div>
                            <p id="totalAmount" class="text-2xl font-bold text-gray-800">₱2,779.76</p>
                        </div>
                    </div>
                </div>

                <!-- Payment History -->
                <div class="border-t border-gray-200 pt-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-history mr-3 text-primary-600"></i> Payment History
                    </h4>

                    <div class="overflow-x-auto rounded-lg border border-gray-200 mb-6">
                        <table class="payment-history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Transaction ID</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="paymentHistoryBody">
                                <!-- Rows will be inserted here dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <button id="confirmPaymentBtn"
                        class="w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 px-4 rounded-lg transition flex items-center justify-center text-lg">
                        <i class="fas fa-lock mr-3"></i>
                        <span>Pay ₱2,779.76 Now</span>
                    </button>

                    <p class="text-xs text-gray-500 mt-3 text-center">
                        <i class="fas fa-shield-alt mr-1"></i> Your payment is secured with 256-bit encryption
                    </p>
                </div>
            </div>

            <!-- Payment Confirmation (Initially Hidden) -->
            <div id="paymentConfirmation" class="bg-white card p-6 hidden">
                <div class="text-center py-8">
                    <div class="flex justify-center mb-6">
                        <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-green-600 text-3xl"></i>
                        </div>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-2">Payment Successful!</h3>
                    <p class="text-gray-600 mb-6 max-w-md mx-auto">Your electricity bill payment has been processed
                        successfully. A receipt has been sent to your email.</p>

                    <div class="bg-green-50 border border-green-200 rounded-xl p-6 max-w-md mx-auto mb-8">
                        <div class="grid grid-cols-2 gap-4 text-left">
                            <div>
                                <p class="text-gray-600 text-sm">Amount Paid:</p>
                                <p id="paidAmount" class="font-medium text-gray-800">₱2,779.76</p>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm">Account Number:</p>
                                <p id="paidAccount" class="font-medium text-gray-800">AC982345</p>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm">Transaction ID:</p>
                                <p class="font-medium text-green-600">TX984732</p>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm">Date:</p>
                                <p id="paymentDate" class="font-medium text-gray-800">July 18, 2023</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button id="newPaymentBtn"
                            class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-8 rounded-lg transition">
                            <i class="fas fa-receipt mr-2"></i>View Receipt
                        </button>
                        <button id="anotherPaymentBtn"
                            class="bg-white border border-primary-600 text-primary-600 hover:bg-primary-50 font-semibold py-3 px-8 rounded-lg transition">
                            <i class="fas fa-bolt mr-2"></i>Make Another Payment
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Info Section -->
    <section class="bg-white py-10">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <h3 class="text-2xl font-bold text-center text-gray-800 mb-2">Why Pay with EcoPower?</h3>
                <p class="text-gray-600 text-center max-w-2xl mx-auto mb-10">We make electricity payments simple,
                    secure, and sustainable.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center p-6 bg-primary-50 rounded-xl">
                        <div class="bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-bolt text-primary-600 text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2">Instant Processing</h4>
                        <p class="text-gray-600">Payments are processed instantly, restoring your service without delay.
                        </p>
                    </div>
                    <div class="text-center p-6 bg-primary-50 rounded-xl">
                        <div class="bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shield-alt text-primary-600 text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2">Bank-Level Security</h4>
                        <p class="text-gray-600">Your financial information is protected with 256-bit encryption.</p>
                    </div>
                    <div class="text-center p-6 bg-primary-50 rounded-xl">
                        <div class="bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-leaf text-primary-600 text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2">Sustainable Energy</h4>
                        <p class="text-gray-600">100% of your payment supports renewable energy projects.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-10 pb-6">
        <div class="container mx-auto px-4">
            <div class="max-w-6xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                    <div class="mb-6 md:mb-0">
                        <div class="flex items-center">
                            <i class="fas fa-bolt text-primary-400 text-2xl mr-2"></i>
                            <span class="text-xl font-bold">Eco<span class="text-primary-400">Power</span></span>
                        </div>
                        <p class="text-gray-400 text-sm mt-2">Sustainable energy for a brighter future</p>
                    </div>
                    <div class="flex space-x-6">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="border-t border-gray-700 pt-6 text-center">
                    <p class="text-gray-400 text-sm">© 2023 EcoPower Energy Solutions. All rights reserved.</p>
                    <p class="text-gray-500 text-xs mt-2">123 Green Energy Blvd, Eco City | support@ecopower.com | (123)
                        456-7890</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="text-center">
            <div class="spinner-lg mb-4"></div>
            <p class="text-gray-700 font-medium">Processing your request</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const accountNumberInput = document.getElementById('accountNumber');
            const fetchAccountBtn = document.getElementById('fetchAccountBtn');
            const accountDetails = document.getElementById('accountDetails');
            const paymentConfirmation = document.getElementById('paymentConfirmation');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const fullNameElement = document.getElementById('fullName');
            const accountNumElement = document.getElementById('accountNum');
            const lastPaymentElement = document.getElementById('lastPaymentDate');
            const accountBalanceElement = document.getElementById('accountBalance');
            const totalAmountElement = document.getElementById('totalAmount');
            const dueIndicator = document.getElementById('dueIndicator');
            const dueProgress = document.getElementById('dueProgress');
            const paidAmountElement = document.getElementById('paidAmount');
            const paidAccountElement = document.getElementById('paidAccount');
            const paymentDateElement = document.getElementById('paymentDate');
            const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');
            const newPaymentBtn = document.getElementById('newPaymentBtn');
            const anotherPaymentBtn = document.getElementById('anotherPaymentBtn');

            // Format date to readable format
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString(undefined, options);
            }

            loadingOverlay.classList.add('hidden');

            // Fetch account details when button is clicked
            fetchAccountBtn.addEventListener('click', function () {
                const accountNumber = accountNumberInput.value.trim();
                const accountError = document.getElementById('accountError');
                const errorMessage = document.getElementById('errorMessage');

                // Reset error state
                accountError.classList.add('hidden');

                if (!accountNumber) {
                    showError('Please enter your account number');
                    return;
                }

                if (accountNumber.length !== 8) {
                    showError('Account number must be 8 digits');
                    return;
                }

                // Show loading
                loadingOverlay.classList.remove('hidden');

                // Simulate API call
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');

                    // Simulate invalid account numbers (starting with 00)
                    if (accountNumber.startsWith('00')) {
                        errorMessage.textContent = 'Consumer account number does not exist or is invalid';
                        accountError.classList.remove('hidden');
                        accountDetails.classList.add('hidden');
                        return;
                    }

                    // For demo purposes, use mock data
                    const accountData = {
                        accountNumber: "AC982345",
                        firstName: "Maria",
                        middleName: "Santos",
                        lastName: "Dela Cruz",
                        suffix: "",
                        lastPaymentDate: "2023-06-15",
                        currentBill: 1850.75,
                        overdueBills: [
                            {
                                month: "June 2023",
                                baseAmount: 850.25,
                                daysOverdue: 45,
                                interestRate: 3.5,
                                interestAmount: 29.76,
                                serviceFee: 50.00
                            }
                        ],
                        totalAmount: 1850.75 + 850.25 + 29.76 + 50.00,
                        paymentHistory: [
                            { date: '2023-06-15', transactionId: 'TX789012', amount: 1750.50, status: 'Paid' },
                            { date: '2023-05-12', transactionId: 'TX345678', amount: 1650.25, status: 'Paid' },
                            { date: '2023-04-10', transactionId: 'TX901234', amount: 1800.00, status: 'Paid' },
                            { date: '2023-03-08', transactionId: 'TX567890', amount: 1720.30, status: 'Paid' }
                        ]
                    };

                    // Update UI with account details
                    fullNameElement.textContent = `${accountData.firstName} ${accountData.middleName} ${accountData.lastName} ${accountData.suffix}`;
                    accountNumElement.textContent = accountData.accountNumber;
                    lastPaymentElement.textContent = formatDate(accountData.lastPaymentDate);
                    accountBalanceElement.textContent = `₱${accountData.totalAmount.toFixed(2)}`;
                    totalAmountElement.textContent = `₱${accountData.totalAmount.toFixed(2)}`;

                    // Populate payment history
                    const paymentHistoryBody = document.getElementById('paymentHistoryBody');
                    paymentHistoryBody.innerHTML = ''; // Clear existing rows

                    accountData.paymentHistory.forEach(transaction => {
                        const formattedDate = formatDate(transaction.date);
                        const statusClass = `status-${transaction.status.toLowerCase()}`;
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${formattedDate}</td>
                            <td>${transaction.transactionId}</td>
                            <td class="text-left">₱${transaction.amount.toFixed(2)}</td>
                            <td><span class="payment-status ${statusClass}">${transaction.status}</span></td>
                        `;
                        paymentHistoryBody.appendChild(row);
                    });

                    // Disable pay button if total due is zero
                    if (accountData.totalAmount <= 0) {
                        confirmPaymentBtn.disabled = true;
                        confirmPaymentBtn.classList.add('disabled-button');
                        confirmPaymentBtn.textContent = "Pay ₱0.00 Now";
                    } else {
                        confirmPaymentBtn.disabled = false;
                        confirmPaymentBtn.classList.remove('disabled-button');
                        confirmPaymentBtn.innerHTML = `<i class="fas fa-lock mr-3"></i><span>Pay ₱${accountData.totalAmount.toFixed(2)} Now</span>`;
                    }

                    // Show account details
                    accountDetails.classList.remove('hidden');

                    // Scroll to account details
                    accountDetails.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 1500);
            });

            // Confirm payment
            confirmPaymentBtn.addEventListener('click', function () {
                // Skip if disabled
                if (confirmPaymentBtn.disabled) return;

                loadingOverlay.classList.remove('hidden');

                // Get total amount
                const totalAmount = parseFloat(totalAmountElement.textContent.replace('₱', ''));
                const accountNumber = accountNumElement.textContent;

                // Simulate payment processing
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                    accountDetails.classList.add('hidden');

                    // Set paid amount
                    paidAmountElement.textContent = `₱${totalAmount.toFixed(2)}`;
                    paidAccountElement.textContent = accountNumber;
                    paymentDateElement.textContent = new Date().toLocaleDateString();

                    // Show payment confirmation
                    paymentConfirmation.classList.remove('hidden');
                    paymentConfirmation.scrollIntoView({ behavior: 'smooth' });
                }, 2000);
            });

            // New payment
            anotherPaymentBtn.addEventListener('click', function () {
                paymentConfirmation.classList.add('hidden');
                accountDetails.classList.add('hidden');
                accountNumberInput.value = '';
                accountNumberInput.focus();
            });

            // View receipt
            newPaymentBtn.addEventListener('click', function () {
                alert('Receipt downloaded! Transaction ID: TX984732');
            });

            // Helper function to show error
            function showError(message) {
                const errorMessage = document.getElementById('errorMessage');
                const accountError = document.getElementById('accountError');

                errorMessage.textContent = message;
                accountError.classList.remove('hidden');

                // Remove error after 5 seconds
                setTimeout(() => {
                    accountError.classList.add('hidden');
                }, 5000);
            }

            // Initialize due progress
            dueProgress.style.width = '70%';
        });
    </script>
</body>

</html>